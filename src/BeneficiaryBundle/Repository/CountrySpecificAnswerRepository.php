<?php

namespace BeneficiaryBundle\Repository;

/**
 * CountrySpecificAnswerRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class CountrySpecificAnswerRepository extends \Doctrine\ORM\EntityRepository
{
    public function hasValue(int $countrySpecificId, $answer, string $conditionString, int $householdId){

        $qb = $this->createQueryBuilder('csa');

        $q  = $qb->where('csa.countrySpecific = :countrySpecificId')
            ->setParameter('countrySpecificId', $countrySpecificId)
            ->andWhere('csa.answer '. $conditionString . ' :answer')
            ->setParameter('answer', $answer)
            ->andWhere('csa.household = :householdId')
            ->setParameter('householdId', $householdId);

        return $q->getQuery()->getResult();
    }
}
